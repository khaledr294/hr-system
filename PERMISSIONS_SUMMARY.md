# ููุฎุต ุชุทุจูู ูุธุงู ุงูุตูุงุญูุงุช

## ุงููุดููุฉ ุงูุฃุตููุฉ
```
ุนูุฏูุง ุณุฌูุช ุฏุฎูู ุจุงุณุชุฎุฏุงู ุญุณุงุจ ุงููุณูู ู ุงูุฐู ููุญุชู ุตูุงุญูุงุช ูุญุฏูุฏุฉ 
ูุฌุฏุช ุงู ูุฏูู ุงูุงููุงููุฉ ูููุตูู ูุฌููุน ุตูุญุงุช ุงูุจุฑูุงูุฌ ู ุงูุงุทูุงุน ุนูู 
ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุจููุง ุจูุง ูุชุฌุงูุฒ ุงูุตูุงุญูุงุช ุงูููููุญุฉ ูู
```

**ุงูุณุจุจ**: ูุงู ุงููุธุงู ูุญุชูู ุนูู ูููุฐุฌ JobTitle ูุน ุตูุงุญูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููู ูู ููู ููุงู ุฃู ุชุญูู ูุนูู ูู ูุฐู ุงูุตูุงุญูุงุช ูู ุงูููุฏ.

## ุงูุญู ุงููุทุจู

### 1๏ธโฃ ุฅูุดุงุก ูุธุงู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช

#### ููู `src/lib/permissions.ts`
- `hasPermission(userId, permission)` - ุงูุชุญูู ูู ุตูุงุญูุฉ ูุงุญุฏุฉ
- `hasAnyPermission(userId, permissions)` - ุงูุชุญูู ูู ุฃู ุตูุงุญูุฉ ูู ูุงุฆูุฉ
- `hasAllPermissions(userId, permissions)` - ุงูุชุญูู ูู ุฌููุน ุงูุตูุงุญูุงุช
- `getUserPermissions(userId)` - ุงูุญุตูู ุนูู ุฌููุน ุตูุงุญูุงุช ุงููุณุชุฎุฏู

**ููุงุญุธุฉ ูุงูุฉ**: ููุชูู `HR_MANAGER` ู `GENERAL_MANAGER` ุฌููุน ุงูุตูุงุญูุงุช ุชููุงุฆูุงู.

#### ููู `src/lib/permission-middleware.ts`
ุฏูุงู ูุณุงุนุฏุฉ ููุงุณุชุฎุฏุงู ุงูุณุฑูุน:
- `checkPagePermission()` - ููุตูุญุงุช
- `requireApiPermission()` - ููู API routes

### 2๏ธโฃ ุตูุญุฉ 403 Forbidden

#### ููู `src/app/403/page.tsx`
ุตูุญุฉ ุฌูููุฉ ููููุฏุฉ ุชุธูุฑ ุนูุฏูุง ูุญุงูู ุงููุณุชุฎุฏู ุงููุตูู ูุตูุญุฉ ุจุฏูู ุตูุงุญูุฉ:
- ุฃููููุฉ ุชุญุฐูุฑ ูุงุถุญุฉ
- ุฑุณุงูุฉ ุจุงูุนุฑุจูุฉ ุชูุถุญ ุงููุดููุฉ
- ุฒุฑ ููุนูุฏุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ุฑุงุจุท ููุชูุงุตู ูุน HR Manager

### 3๏ธโฃ ุญูุงูุฉ API Endpoints

ุชู ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุนูู ุฌููุน ุงูุนูููุงุช:

#### Workers API
| Method | Endpoint | ุงูุตูุงุญูุฉ ุงููุทููุจุฉ |
|--------|----------|-------------------|
| GET | `/api/workers` | `VIEW_WORKERS` |
| POST | `/api/workers` | `CREATE_WORKERS` |
| GET | `/api/workers/[id]` | `VIEW_WORKERS` |
| PUT | `/api/workers/[id]` | `EDIT_WORKERS` |
| DELETE | `/api/workers/[id]` | `DELETE_WORKERS` |

#### Contracts API
| Method | Endpoint | ุงูุตูุงุญูุฉ ุงููุทููุจุฉ |
|--------|----------|-------------------|
| GET | `/api/contracts` | `VIEW_CONTRACTS` |
| POST | `/api/contracts` | `CREATE_CONTRACTS` |
| PATCH | `/api/contracts/[id]` | `EDIT_CONTRACTS` |
| DELETE | `/api/contracts/[id]` | `DELETE_CONTRACTS` |

#### Clients API
| Method | Endpoint | ุงูุตูุงุญูุฉ ุงููุทููุจุฉ |
|--------|----------|-------------------|
| GET | `/api/clients` | `VIEW_CLIENTS` |
| POST | `/api/clients` | `CREATE_CLIENTS` |
| GET | `/api/clients/[id]` | `VIEW_CLIENTS` |
| PUT | `/api/clients/[id]` | `EDIT_CLIENTS` |
| DELETE | `/api/clients/[id]` | `DELETE_CLIENTS` |

#### Users API
| Method | Endpoint | ุงูุตูุงุญูุฉ ุงููุทููุจุฉ |
|--------|----------|-------------------|
| POST | `/api/users` | `CREATE_USERS` |
| PUT | `/api/users/[id]` | `EDIT_USERS` |
| DELETE | `/api/users/[id]` | `DELETE_USERS` |

### 4๏ธโฃ ุญูุงูุฉ ุงูุตูุญุงุช

#### ุตูุญุฉ ุงูุนูุงู (`/workers`)
- ุชุญูู ูู ุตูุงุญูุฉ `VIEW_WORKERS`
- ุฅุนุงุฏุฉ ุชูุฌูู ูู `/403` ุนูุฏ ุนุฏู ูุฌูุฏ ุงูุตูุงุญูุฉ
- ุฅุนุงุฏุฉ ุชูุฌูู ูู `/login` ุนูุฏ ุนุฏู ุชุณุฌูู ุงูุฏุฎูู

## ููู ูุนูู ุงููุธุงูุ

### 1. ุงููุณุชุฎุฏู ูุญุงูู ุงููุตูู ูุตูุญุฉ ุฃู API
```typescript
const session = await getSession();
```

### 2. ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
```typescript
if (!session?.user) {
  return Response('Unauthorized', { status: 401 });
}
```

### 3. ุงูุชุญูู ูู ุงูุตูุงุญูุฉ
```typescript
const canView = await hasPermission(session.user.id, 'VIEW_WORKERS');
if (!canView) {
  return Response('Forbidden', { status: 403 });
}
```

### 4. ุงูุณูุงุญ ุจุงููุตูู
```typescript
// ุงููุณุชุฎุฏู ูุฏูู ุงูุตูุงุญูุฉุ ููููู ุงููุชุงุจุนุฉ
```

## ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ (24 ุตูุงุญูุฉ)

### ๐ท Workers (5 ุตูุงุญูุงุช)
- `VIEW_WORKERS` - ุนุฑุถ ูุงุฆูุฉ ุงูุนูุงู
- `CREATE_WORKERS` - ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ
- `EDIT_WORKERS` - ุชุนุฏูู ุจูุงูุงุช ุนุงูู
- `DELETE_WORKERS` - ุญุฐู ุนุงูู
- `RESERVE_WORKERS` - ุญุฌุฒ ุนุงูู

### ๐ Contracts (4 ุตูุงุญูุงุช)
- `VIEW_CONTRACTS` - ุนุฑุถ ุงูุนููุฏ
- `CREATE_CONTRACTS` - ุฅูุดุงุก ุนูุฏ ุฌุฏูุฏ
- `EDIT_CONTRACTS` - ุชุนุฏูู ุนูุฏ
- `DELETE_CONTRACTS` - ุญุฐู ุนูุฏ

### ๐ฅ Clients (4 ุตูุงุญูุงุช)
- `VIEW_CLIENTS` - ุนุฑุถ ุงูุนููุงุก
- `CREATE_CLIENTS` - ุฅุถุงูุฉ ุนููู
- `EDIT_CLIENTS` - ุชุนุฏูู ุนููู
- `DELETE_CLIENTS` - ุญุฐู ุนููู

### ๐ค Users (4 ุตูุงุญูุงุช)
- `VIEW_USERS` - ุนุฑุถ ุงููุณุชุฎุฏููู
- `CREATE_USERS` - ุฅุถุงูุฉ ูุณุชุฎุฏู
- `EDIT_USERS` - ุชุนุฏูู ูุณุชุฎุฏู
- `DELETE_USERS` - ุญุฐู ูุณุชุฎุฏู

### ๐ Reports (2 ุตูุงุญูุงุช)
- `VIEW_REPORTS` - ุนุฑุถ ุงูุชูุงุฑูุฑ
- `EXPORT_DATA` - ุชุตุฏูุฑ ุงูุจูุงูุงุช

### โ๏ธ System (5 ุตูุงุญูุงุช)
- `VIEW_LOGS` - ุนุฑุถ ุณุฌู ุงููุธุงู
- `MANAGE_SETTINGS` - ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
- `MANAGE_JOB_TITLES` - ุฅุฏุงุฑุฉ ุงููุณููุงุช ุงููุธูููุฉ
- (ูุตูุงุญูุงุช ุฃุฎุฑู...)

## ุงูุงุณุชุซูุงุกุงุช

### ูุฏุฑุงุก ุงููุธุงู ูุฏููู ุตูุงุญูุงุช ูุงููุฉ
```typescript
if (user.role === "HR_MANAGER" || user.role === "GENERAL_MANAGER") {
  return true; // ูุฏููู ุฌููุน ุงูุตูุงุญูุงุช
}
```

## ูุง ุชู ุฅูุฌุงุฒู โ

- [x] ุฅูุดุงุก ูุธุงู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- [x] ุฅูุดุงุก ุตูุญุฉ 403
- [x] ุญูุงูุฉ Workers API (5 endpoints)
- [x] ุญูุงูุฉ Contracts API (4 endpoints)
- [x] ุญูุงูุฉ Clients API (5 endpoints)
- [x] ุญูุงูุฉ Users API (3 endpoints)
- [x] ุญูุงูุฉ ุตูุญุฉ Workers
- [x] ุงุฎุชุจุงุฑ ุงููุธุงู ูุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

## ูุง ุชุจูู ูููุณุชูุจู ๐

- [ ] ุญูุงูุฉ ุจุงูู ุงูุตูุญุงุช (contracts, clients, users, reports)
- [ ] ุชุญุฏูุซ Sidebar ูุฅุฎูุงุก ุงูุฑูุงุจุท ุบูุฑ ุงููุตุฑุญ ุจูุง
- [ ] ุญูุงูุฉ API endpoints ุงูุฅุถุงููุฉ:
  - `/api/contracts/archive-expired`
  - `/api/contracts/update-expired`
  - `/api/workers/release-reservations`
  - `/api/reports/*`
  - ูุบูุฑูุง...
- [ ] ุฅุถุงูุฉ audit logging
- [ ] ุฅุถุงูุฉ permission groups

## ููููุฉ ุงูุงุฎุชุจุงุฑ

ุฑุงุฌุน ููู `TESTING_PERMISSIONS_GUIDE.md` ููุญุตูู ุนูู ุฏููู ุงุฎุชุจุงุฑ ุดุงูู.

### ุณุฑูุน:
1. ุฃูุดุฆ ูุณูู ูุธููู ุจุตูุงุญูุงุช ูุญุฏูุฏุฉ (ูุซูุงู: VIEW_WORKERS ููุท)
2. ุฃูุดุฆ ูุณุชุฎุฏู ุฌุฏูุฏ ุจูุฐุง ุงููุณูู
3. ุณุฌู ุฏุฎูู ุจุงููุณุชุฎุฏู ุงูุฌุฏูุฏ
4. ุญุงูู ุฅุถุงูุฉ ุนุงูู ุฌุฏูุฏ โ ูุฌุจ ุฃู ููุดู (403 Forbidden)
5. ุญุงูู ุนุฑุถ ูุงุฆูุฉ ุงูุนูุงู โ ูุฌุจ ุฃู ููุฌุญ โ

## ุงููููุงุช ุงููุนุฏูุฉ

### ูููุงุช ุฌุฏูุฏุฉ:
- `src/lib/permission-middleware.ts`
- `src/app/403/page.tsx`
- `PERMISSIONS_IMPLEMENTATION.md`
- `TESTING_PERMISSIONS_GUIDE.md`
- `PERMISSIONS_SUMMARY.md` (ูุฐุง ุงูููู)

### ูููุงุช ูุนุฏูุฉ:
- `src/app/workers/page.tsx`
- `src/app/api/workers/route.ts`
- `src/app/api/workers/[id]/route.ts`
- `src/app/api/contracts/route.ts`
- `src/app/api/contracts/[id]/route.ts`
- `src/app/api/clients/route.ts`
- `src/app/api/clients/[id]/route.ts`
- `src/app/api/users/route.ts`
- `src/app/api/users/[id]/route.ts`

## ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

โจ **ุงูุขู ุงููุธุงู ุขูู ููุญูู ุจุงููุงูู!**

ูู ูุนุฏ ุจุฅููุงู ุฃู ูุณุชุฎุฏู ุงููุตูู ูุตูุญุงุช ุฃู ุนูููุงุช ููุณุช ุถูู ุตูุงุญูุงุชู. ูุธุงู ุงูุตูุงุญูุงุช ูุนูู ุจุดูู ุตุญูุญ ููุญูู ุฌููุน API endpoints ุงูุฑุฆูุณูุฉ.

---

**ููุงุญุธุฉ ูููุทูุฑ**: 
ุนูุฏ ุฅุถุงูุฉ ุตูุญุงุช ุฃู API endpoints ุฌุฏูุฏุฉุ ุชุฃูุฏ ูู:
1. ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุตูุงุญูุฉ ุงูููุงุณุจุฉ
2. ุฅุฑุฌุงุน 403 ุนูุฏ ุนุฏู ูุฌูุฏ ุงูุตูุงุญูุฉ
3. ุงุฎุชุจุงุฑ ุงูุณููุงุฑูููุงุช ุงููุฎุชููุฉ
